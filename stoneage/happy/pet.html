<!DOCTYPE html>
<html lang="en">
<head>
	<title>Happy Server Pet Info</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<style>
		body { cursor: default; }
		#btnTop {
		  display: none;
		  position: fixed;
		  bottom: 20px;
		  right: 30px;
		  z-index: 99;
		  font-size: 18px;
		  border: none;
		  outline: none;
		  background-color: red;
		  color: white;
		  cursor: pointer;
		  padding: 15px;
		  border-radius: 4px;
		}

		#btnTop:hover {
		  background-color: #555;
		}
		.searchValue {
			display: inline;
			width: 100px;
		}

		.green { color: #fff; background-color: #5cb85c;}
		.blue { color: #fff; background-color: #337ab7;}
		.red { color: #fff; background-color: #d9534f;}
		.yellow { color: #fff; background-color: #f0ad4e;}
	</style>
	<script>
        var pet = [
             {"no":"044","name":"리비노","beginning":22,"stature":4.50,"hp":27,"atk":37,"def":19,"agi":17}
			,{"no":"045","name":"얀기로","beginning":29,"stature":4.50,"hp":27,"atk":36,"def":16,"agi":20}
			,{"no":"046","name":"반보로","beginning":27,"stature":4.50,"hp":25,"atk":37,"def":15,"agi":21}
			,{"no":"047","name":"반기노","beginning":26,"stature":4.50,"hp":24,"atk":38,"def":16,"agi":20}
			,{"no":"048","name":"부르돈","beginning":25,"stature":4.50,"hp":25,"atk":35,"def":14,"agi":24}
        ]

        // 스크롤
		// 사용자가 문서 상단에서 50px 아래로 스크롤 할 때 버튼을 표시합니다.
		window.onscroll = function() {scrollFunction()};
		function scrollFunction() {
			if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
				btnTop.style.display = "block";
			} else {
				btnTop.style.display = "none";
			}
		}

        function calculation(foundPet) {

            var baseHp  = -2;
            var baseAtk = -2;
            var baseDef = -2;
            var baseAgi = -2;

            for (var i = 0; i <= 4; i++) {

            }

            var a = foundPet.hp  + baseHp;
            var b = foundPet.atk + baseAtk;
            var c = foundPet.def + baseDef;
            var d = foundPet.agi + baseAgi;
            result(foundPet, a, b, c, d);
        }

        function result(foundPet, a, b, c, d) {

            var hp  = foundPet.beginning * a / 100;
            var atk = foundPet.beginning * b / 100;
            var def = foundPet.beginning * c / 100;
            var agi = foundPet.beginning * d / 100;

            var resultHp  = (hp * 4) + atk + def + agi;
            var resultAtk = (hp * 0.1) + atk + (def * 0.1) + (agi * 0.05);
            var resultDef = (hp * 0.1) + (atk * 0.1) + def + (agi * 0.05);
            var resultAgi = agi;
            console(a + "," + b + "," + c + "," + d);
            console(resultHp.toFixed(2) + "," + resultAtk.toFixed(2) + "," + resultDef.toFixed(2) + "," + resultAgi.toFixed(2));

            $tbody = $('#result tbody');
            $tbody.empty();
			if (a == resultHp && b == resultAtk && c == resultDef && d == resultAgi) {
				$tbody.append(''
					+ '<tr>'
					+ '<td class="text-right">' + 0 + '</td>'
					+ '<td class="text-right">' + resultHp.toFixed(2) + '</td>'
					+ '<td class="text-right">' + resultAtk.toFixed(2) + '</td>'
					+ '<td class="text-right">' + resultDef.toFixed(2) + '</td>'
					+ '<td class="text-right">' + resultAgi.toFixed(2) + '</td>'
					+ '</tr>'
				);
			}
        }

        // jQuery
		$(document).ready(function() {

            // 실행 버튼
			$("#calculation").on("click", function() {
                var foundPet = pet.find(p => p.name === $("#name").val());
                if (foundPet == undefined) {
                    alert("페트 정보를 찾을 수 없습니다.");
                }
				calculation();
			});

            $("#select").on("change", function() {
                var foundPet = pet.find(p => p.name === $("#select").val());
                calculation(foundPet);
			});

        });
    </script>
</head>
<body>
	<div class="container">
		<h2>Happy Server Pet Info</h2>
		<hr>
		<p class="lead">
			아직 미완성입니다. 수정 또는 추가가 필요한 경우 디스코드 <strong>칸쵸</strong>를 호출해주세요.
		</p>
		<blockquote>
			<p>다중 검색은 구분자 <strong>,</strong> 를 붙여주세요.</p>
			<footer>리비노,얀기로,반보로,반기노,부르돈</footer>
		</blockquote>
		
        <div class="navbar-form navbar-right" role="search">
			<button class="btn btn-success" type="button" id="qpfmrk">베르가류</button>
		</div>
		
		<br>
		<br>
		<br>
		<br>

		<div class="table-responsive">
			<table class="table table-striped">
				<colgroup>
					
				</colgroup>
				<thead>
					<tr>
						<th>이름</th>
                        <th>내구력</th>
                        <th>공격력</th>
                        <th>방어력</th>
                        <th>순발력</th>
                        <th></th>
					</tr>
				</thead>
				<tbody>
                    <tr>
                        <td class="form-group">
                            <!--
                            <select class="form-control" id="select">
                                <option>리비노</option>
                                <option>얀기로</option>
                                <option>반보로</option>
                                <option>반기노</option>
                                <option>부르돈</option>
                            </select>
                            -->
                            <input type="number" class="form-control" id="name" placeholder="이름">
                        </td>
                        <td class="form-group">
                            <input type="number" class="form-control" id="hp" placeholder="내구력">
                        </td>
                        <td class="form-group">
                            <input type="number" class="form-control" id="atk" placeholder="공격력">
                        </td>
                        <td class="form-group">
                            <input type="number" class="form-control" id="def" placeholder="방어력">
                        </td>
                        <td class="form-group">
                            <input type="number" class="form-control" id="agi" placeholder="순발력">
                        </td>
                        <td class="form-group">
                            <button type="button" class="form-control" id="calculation">계산</button>
                        </td>
                    </tr>
				</tbody>
			</table>
		</div>

        <div class="table-responsive" id="result">
            <table class="table table-striped">
                <colgroup>
                    
                </colgroup>
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1등급</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
